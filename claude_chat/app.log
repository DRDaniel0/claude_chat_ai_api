2024-12-24 08:16:18,246 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:16:18,318 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.71.71.224:5001
2024-12-24 08:16:18,318 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2024-12-24 08:16:18,319 - werkzeug - INFO -  * Restarting with stat
2024-12-24 08:16:18,655 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:16:18,672 - werkzeug - WARNING -  * Debugger is active!
2024-12-24 08:16:18,678 - werkzeug - INFO -  * Debugger PIN: 114-342-857
2024-12-24 08:16:21,601 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:16:21] "GET / HTTP/1.1" 200 -
2024-12-24 08:16:21,615 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:16:21] "GET /static/css/style.css HTTP/1.1" 200 -
2024-12-24 08:16:21,620 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:16:21] "GET /static/js/main.js HTTP/1.1" 200 -
2024-12-24 08:16:27,624 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:16:27] "POST /conversation HTTP/1.1" 200 -
2024-12-24 08:16:30,193 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): openaipublic.blob.core.windows.net:443
2024-12-24 08:16:30,862 - urllib3.connectionpool - DEBUG - https://openaipublic.blob.core.windows.net:443 "GET /encodings/cl100k_base.tiktoken HTTP/1.1" 200 1681126
2024-12-24 08:16:32,269 - __main__ - DEBUG - Sending request to Claude with 1 messages
2024-12-24 08:16:32,272 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8192, 'messages': [{'role': 'user', 'content': 'testing'}], 'model': 'claude-3-sonnet-20240229', 'temperature': 0.7}}
2024-12-24 08:16:32,291 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2024-12-24 08:16:32,291 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2024-12-24 08:16:32,326 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x113028500>
2024-12-24 08:16:32,326 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x113016f50> server_hostname='api.anthropic.com' timeout=600
2024-12-24 08:16:32,350 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11399e2a0>
2024-12-24 08:16:32,350 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-24 08:16:32,351 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-24 08:16:32,351 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-24 08:16:32,351 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-24 08:16:32,351 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-24 08:16:32,524 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Tue, 24 Dec 2024 07:16:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'176'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'false'), (b'request-id', b'req_01ASb8DH78c9WzUAJgeXKwCS'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f6ece765dd495e4-ARN')])
2024-12-24 08:16:32,525 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 400 Bad Request"
2024-12-24 08:16:32,525 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-24 08:16:32,526 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-24 08:16:32,526 - httpcore.http11 - DEBUG - response_closed.started
2024-12-24 08:16:32,526 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-24 08:16:32,526 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "400 Bad Request" Headers({'date': 'Tue, 24 Dec 2024 07:16:32 GMT', 'content-type': 'application/json', 'content-length': '176', 'connection': 'keep-alive', 'x-should-retry': 'false', 'request-id': 'req_01ASb8DH78c9WzUAJgeXKwCS', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '8f6ece765dd495e4-ARN'})
2024-12-24 08:16:32,526 - anthropic._base_client - DEBUG - request_id: req_01ASb8DH78c9WzUAJgeXKwCS
2024-12-24 08:16:32,526 - anthropic._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/danielr/Documents/conversations/claude/lib/python3.12/site-packages/anthropic/_base_client.py", line 1039, in _request
    response.raise_for_status()
  File "/Users/danielr/Documents/conversations/claude/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2024-12-24 08:16:32,532 - anthropic._base_client - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2024-12-24 08:16:32,532 - anthropic._base_client - DEBUG - Re-raising status error
2024-12-24 08:16:32,533 - __main__ - ERROR - Error in chat endpoint: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'max_tokens: 8192 > 4096, which is the maximum allowed number of output tokens for claude-3-sonnet-20240229'}}
2024-12-24 08:16:32,534 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:16:32] "[35m[1mPOST /chat HTTP/1.1[0m" 500 -
2024-12-24 08:19:01,885 - werkzeug - INFO -  * Detected change in '/Users/danielr/Documents/conversations/claude_chat/config.py', reloading
2024-12-24 08:19:01,973 - werkzeug - INFO -  * Restarting with stat
2024-12-24 08:19:02,819 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:19:02,841 - werkzeug - WARNING -  * Debugger is active!
2024-12-24 08:19:02,847 - werkzeug - INFO -  * Debugger PIN: 114-342-857
2024-12-24 08:19:47,740 - werkzeug - INFO -  * Detected change in '/Users/danielr/Documents/conversations/claude_chat/app.py', reloading
2024-12-24 08:19:47,788 - werkzeug - INFO -  * Restarting with stat
2024-12-24 08:19:48,189 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:19:48,207 - werkzeug - WARNING -  * Debugger is active!
2024-12-24 08:19:48,213 - werkzeug - INFO -  * Debugger PIN: 114-342-857
2024-12-24 08:19:52,495 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:19:52,541 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.71.71.224:5001
2024-12-24 08:19:52,541 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2024-12-24 08:19:52,542 - werkzeug - INFO -  * Restarting with stat
2024-12-24 08:19:52,843 - __main__ - INFO - Starting application with config: {'host': '0.0.0.0', 'port': 5001, 'debug': True}
2024-12-24 08:19:52,858 - werkzeug - WARNING -  * Debugger is active!
2024-12-24 08:19:52,862 - werkzeug - INFO -  * Debugger PIN: 114-342-857
2024-12-24 08:19:54,702 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:19:54] "GET / HTTP/1.1" 200 -
2024-12-24 08:19:54,730 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:19:54] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2024-12-24 08:19:54,735 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:19:54] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2024-12-24 08:19:57,483 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:19:57] "POST /conversation HTTP/1.1" 200 -
2024-12-24 08:19:57,639 - __main__ - DEBUG - Sending request to Claude with 1 messages
2024-12-24 08:19:57,640 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': 'test'}], 'model': 'claude-3-sonnet-20240229', 'temperature': 0.7}}
2024-12-24 08:19:57,660 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2024-12-24 08:19:57,660 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2024-12-24 08:19:57,676 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b3a34d0>
2024-12-24 08:19:57,676 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x102e92f50> server_hostname='api.anthropic.com' timeout=600
2024-12-24 08:19:57,700 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b413530>
2024-12-24 08:19:57,700 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-24 08:19:57,700 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-24 08:19:57,700 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-24 08:19:57,700 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-24 08:19:57,701 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-24 08:19:58,627 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 24 Dec 2024 07:19:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2024-12-24T07:19:59Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'40000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-12-24T07:19:58Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-12-24T07:19:58Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'48000'), (b'anthropic-ratelimit-tokens-reset', b'2024-12-24T07:19:58Z'), (b'request-id', b'req_01GtVD3Naimhiwu3pYUjmPfK'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f6ed379de542d81-ARN'), (b'Content-Encoding', b'gzip')])
2024-12-24 08:19:58,629 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-12-24 08:19:58,629 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-24 08:19:58,630 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-24 08:19:58,630 - httpcore.http11 - DEBUG - response_closed.started
2024-12-24 08:19:58,630 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-24 08:19:58,630 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 24 Dec 2024 07:19:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2024-12-24T07:19:59Z', 'anthropic-ratelimit-input-tokens-limit': '40000', 'anthropic-ratelimit-input-tokens-remaining': '40000', 'anthropic-ratelimit-input-tokens-reset': '2024-12-24T07:19:58Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2024-12-24T07:19:58Z', 'anthropic-ratelimit-tokens-limit': '48000', 'anthropic-ratelimit-tokens-remaining': '48000', 'anthropic-ratelimit-tokens-reset': '2024-12-24T07:19:58Z', 'request-id': 'req_01GtVD3Naimhiwu3pYUjmPfK', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '8f6ed379de542d81-ARN', 'content-encoding': 'gzip'})
2024-12-24 08:19:58,630 - anthropic._base_client - DEBUG - request_id: req_01GtVD3Naimhiwu3pYUjmPfK
2024-12-24 08:19:58,644 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:19:58] "POST /chat HTTP/1.1" 200 -
2024-12-24 08:20:22,676 - __main__ - DEBUG - Sending request to Claude with 3 messages
2024-12-24 08:20:22,678 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': 'test'}, {'role': 'assistant', 'content': "I'm ready to assist you with any task or question you may have. Please provide me with some context or details about what you need help with."}, {'role': 'user', 'content': 'am i talking to claude'}], 'model': 'claude-3-sonnet-20240229', 'temperature': 0.7}}
2024-12-24 08:20:22,679 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2024-12-24 08:20:22,679 - httpcore.connection - DEBUG - close.started
2024-12-24 08:20:22,680 - httpcore.connection - DEBUG - close.complete
2024-12-24 08:20:22,680 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2024-12-24 08:20:22,702 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10da4d160>
2024-12-24 08:20:22,702 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x102e92f50> server_hostname='api.anthropic.com' timeout=600
2024-12-24 08:20:22,729 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10da4ce00>
2024-12-24 08:20:22,730 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-24 08:20:22,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-24 08:20:22,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-24 08:20:22,730 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-24 08:20:22,730 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-24 08:20:23,399 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 24 Dec 2024 07:20:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2024-12-24T07:20:24Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'40000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-12-24T07:20:23Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-12-24T07:20:23Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'48000'), (b'anthropic-ratelimit-tokens-reset', b'2024-12-24T07:20:23Z'), (b'request-id', b'req_01BKyGovEcvcdwpi5bc5uj1m'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8f6ed416381f0d2e-ARN'), (b'Content-Encoding', b'gzip')])
2024-12-24 08:20:23,401 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-12-24 08:20:23,402 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-24 08:20:23,402 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-24 08:20:23,403 - httpcore.http11 - DEBUG - response_closed.started
2024-12-24 08:20:23,403 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-24 08:20:23,403 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 24 Dec 2024 07:20:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2024-12-24T07:20:24Z', 'anthropic-ratelimit-input-tokens-limit': '40000', 'anthropic-ratelimit-input-tokens-remaining': '40000', 'anthropic-ratelimit-input-tokens-reset': '2024-12-24T07:20:23Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2024-12-24T07:20:23Z', 'anthropic-ratelimit-tokens-limit': '48000', 'anthropic-ratelimit-tokens-remaining': '48000', 'anthropic-ratelimit-tokens-reset': '2024-12-24T07:20:23Z', 'request-id': 'req_01BKyGovEcvcdwpi5bc5uj1m', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '8f6ed416381f0d2e-ARN', 'content-encoding': 'gzip'})
2024-12-24 08:20:23,403 - anthropic._base_client - DEBUG - request_id: req_01BKyGovEcvcdwpi5bc5uj1m
2024-12-24 08:20:23,408 - werkzeug - INFO - 127.0.0.1 - - [24/Dec/2024 08:20:23] "POST /chat HTTP/1.1" 200 -
2024-12-24 08:22:29,663 - werkzeug - INFO -  * Detected change in '/Users/danielr/Documents/conversations/claude_chat/database.py', reloading
2024-12-24 08:22:29,747 - werkzeug - INFO -  * Restarting with stat
